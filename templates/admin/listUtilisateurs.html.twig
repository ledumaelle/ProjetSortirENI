{% extends 'layout.html.twig' %}


{% block body %}
    <a href="{{ path('app_admin_add_utilisateurs') }}" class="btn grey lighten-2 btn-md mt-4">Ajouter un utilisateur</a>
    <button data-toggle="modal" data-target="#importUsers" class="btn grey lighten-2 btn-md mt-4">Importer des
        utilisateur
    </button>

    <div class="modal fade" id="importUsers" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header grey lighten-4">
                    <h4 class="modal-title">Importer des utilisateurs</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body mx-3">
                    <form method="post" action="{{ path('app_admin_import_users') }}" enctype="multipart/form-data">
                        <div class="input-file-container">
                            <input class="input-file" type="file" name="csvFile" id="csvFile" accept=".csv"/>
                            <label for="my-file" class="input-file-trigger" tabindex="0">
                                Choisir une liste d'utilisateurs (.csv)
                            </label>
                        </div>
                        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                        <button class="btn grey lighten-2 btn-md mt-4" type="submit">Importer
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <table class="table">
        <thead>
        <tr>
            <th scope="col">Pseudo</th>
            <th scope="col">Mail</th>
            <th scope="col">Nom</th>
            <th scope="col">Prénom</th>
            <th scope="col">Téléphone</th>
            <th scope="col">Campus</th>
        </tr>
        </thead>
        <tbody>
        {% for participant in participants %}
            <tr>
                <th scope="row">{{ participant.pseudo }}</th>
                <th>{{ participant.mail }}</th>
                <th>{{ participant.nom }}</th>
                <th>{{ participant.prenom }}</th>
                <th>{{ participant.telephone }}</th>
                <th>{{ participant.campus.nom }}</th>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <style>
        /* styles de base si JS est activé */
        .input-file-container {
            position: relative;
        }

        .input-file-trigger {
            display: block;
            padding: 14px 45px;
            background: #4285F4;
            color: #fff;
            font-size: 1em;
            transition: all .4s;
            cursor: pointer;
        }

        .input-file {
            position: absolute;
            top: 0;
            left: 0;
            width: 225px;
            padding: 14px 0;
            opacity: 0;
            cursor: pointer;
        }
    </style>
{% endblock %}
