{% extends 'layout.html.twig' %}



{% block body %}




<div class="card-body">
    {{ form_start(form) }}

        {{ form_errors(form) }}

        {{ form_row(form.nom) }}
        {{ form_row(form.dateHeureDebut) }}
        {{ form_row(form.dateLimiteInscription) }}
        {{ form_row(form.duree) }}
        {{ form_row(form.nbInscriptionsMax) }}
        {{ form_row(form.infosSortie) }}
        <div class="form-control mb-4">
            {{ form_widget(form.isprivate) }}
            {{ form_label(form.isprivate) }}
        </div>

        {{ form_row(form.siteOrganisateur) }}
        {{ form_row(form.ville) }}
        <div class="msel-wrapper mb-4 d-flex flex-row align-items-baseline justify-content-between">
            {{ form_row(form.lieu) }} <a href="{{ path('lieu_create') }}" class="btn btn-primary btn-rounded"><i class="fas fa-plus mr-1"></i> Ajouter un lieu</a>
        </div>

        <div class=" mb-4 d-flex flex-row align-items-baseline ">
            <div class="msel-from-wrapper" style="display: table-cell;">
                {{ form_widget(form.userAll) }}
            </div>
            <div class="msel-button-wrapper" style="display: table-cell; vertical-align: middle;">
                <button type="button" id="addButton" class="msel-button-promote" style="display: block;">&gt;&gt;</button>
                <button type="button" id="removeButton" class="msel-button-demote" style="display: block;">&lt;&lt;</button>
            </div>
            <div class="msel-to-wrapper" style="display: table-cell;">
                {{ form_widget(form.userInscrit) }}
            </div>
        </div>
        <div class=" mb-4">
            {{ form_widget(form.Enregistrer) }}
            {{ form_widget(form.Publier) }}
        </div>

    {{ form_end(form) }}
</div>


    <script>
        var $ville = $('#sortie_ville');
        var $addButton = $('#addButton');
        var $removeButton = $('#removeButton');
        var dateHeureDebut= $('#sortie_dateHeureDebut');
        var dateLimiteInscription= $('#sortie_dateLimiteInscription');
        // When ville gets selected ...
        $ville.change(function() {
            // ... retrieve the corresponding form.
            var $form = $(this).closest('form');
            // Simulate form data, but only include the selected ville value.
            var data = {};
            data[$ville.attr('name')] = $ville.val();
            data[dateHeureDebut.attr('name')] =dateHeureDebut.val();
            data[dateLimiteInscription.attr('name')] =dateLimiteInscription.val();
            // Submit data via AJAX to the form's action path.
            $.ajax({
                url : $form.attr('action'),
                type: $form.attr('method'),
                data : data,
                success: function(html) {
                    // Replace current position field ...
                    console.log('succes');
                    $('#sortie_lieu').replaceWith(
                        // ... with the returned one from the AJAX response.
                        $(html).find('#sortie_lieu')
                    );
                    // Position field now displays the appropriate positions.
                }
            });
        });

        $addButton.click(function (){

            var user = $('#sortie_userAll :selected');
            console.log(user)
            var userInscrit = $('#sortie_userInscrit')
           // var user = userAll.options[userAll.selectedIndex].value;
            userInscrit.append(user);
        });

        $removeButton.click(function (){

            var user = $('#sortie_userInscrit :selected');
            console.log(user)
            var userInscrit = $('#sortie_userAll')
            // var user = userAll.options[userAll.selectedIndex].value;
            userInscrit.append(user);
        });


    </script>

{% endblock %}
{% block javascripts %}{% endblock %}


